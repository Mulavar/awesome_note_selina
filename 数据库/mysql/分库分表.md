## 概念

分库分表，按字面意思，即是把原来在一个库里的数据分到几个库上，将原来在一个表中的数据分成好几张表。



## 原因

对大数据量下mysql的分库分表是很有必要的，原因如下：

- mysql的性能表现在1000W所左右最佳，再多性能就会有明显下降；
- 使用联合查询时，过大的表会造成很大的性能负担；
- 磁盘本身对大文件的操作对性能也会造成影响；
- mysql中有一种机制是表锁定和行锁定，是为了保证数据的完整性：
    - 表锁定表示你们都不能对这张表进行操作，必须等我对表操作完才行。
    - 行锁定表示必须等我对这条数据操作完了，别的sql才能对这条数据进行操作。



## 方法

分为垂直切分和水平切分。

### 垂直切分

根据业务逻辑和模块划分，如用户一张表、商品一张表等。

### 水平切分

当表中数据量过大时，水平切分成几个结构相同的表。



## 问题

切分之后可能存在以下问题：

- 事务的原子性、一致性等的保障成本提高；
- 跨库跨表的join问题；
- 数据管理更加复杂，比如查询需要对多个表查询进行归并；
- ……
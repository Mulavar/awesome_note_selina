### 中断概念

**中断就是在计算机执行程序的过程中，由于出现了某些特殊事情，使得CPU暂停对程序的执行，转而去执行处理这一事件的程序。**



### 中断分类

中断一般分为三类：

**异常中断**：如机器硬件故障引起的中断；

**软中断**：**程序中执行了引起中断的指令而造成的中断，如系统调用**；

**外部中断**：由外部设备请求引起的中断，如IO调用；



### 中断优先级

**机器错误 > 时钟 > 磁盘 > 网络设备 > 终端 > 软件中断**





### 用户态与内核态切换

- **系统调用**：程序的执行一般是在用户态下执行的，但当程序需要使用操作系统提供的服务时，比如说**打开某一设备、创建文件、读写文件（这些均属于系统调用）等，就需要向操作系统发出调用服务的请求，这就是系统调用。**
- **异常**：当CPU在执行运行在用户态下的程序时，发生了某些事先不可知的异常，这时会触发由当前运行进程切换到处理此异常的内核相关程序中，也就转到了内核态，**比如缺页异常**。
- **外围设备的中断：当外围设备完成用户请求的操作后，会向CPU发出相应的中断信号**，这时CPU会暂停执行下一条即将要执行的指令转而去执行与中断信号对应的处理程序，如果先前执行的指令是用户态下的程序，那么这个转换的过程自然也就发生了由用户态到内核态的切换。比如硬盘读写操作完成，系统会切换到硬盘读写的中断处理程序中执行后续操作等。



### 用户态和内核态区别

主要是权限不同。

- **用户态的进程能存取它们自己的指令和数据，但不能存取内核指令和数据（或其他进程的指令和数据）**。
- **某些机器指令是特权指令，在用户态下执行特权指令会引起错误。**